<?xml version="1.0" encoding="windows-1251" standalone="yes" ?>
<triggers>

<!-- Игрок выезжает из тоннеля. Игрок ищет Лису, укравшую диск 2.(1). -->
	<trigger Name="trStart01_cam02" active="0">
		<event flypath="Start01_cam02" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			local vehNezn = GetEntityByName("vehNezn")
			if vehNezn then
				vehNezn:SetSkin(3)
				vehNezn:SetGamePositionOnGround( CVector(7620.150, 279.045, 4857.137))
				vehNezn:SetRotation(Quaternion(-0.009, 0.052, -0.026, 0.998))
				vehNezn:SetExternalPathByName("vehNezn_path01")
			end

			AddCinematicMessage( 23, 1 )

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trStart01_cam03" active="0">
		<event flypath="Start01_cam03" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			AddCinematicMessage( 24, 1 )
			AddCinematicMessage( 25, 0.1 )
			AddCinematicMessage( 26, 0.1 )
			AddCinematicMessage( 27, 0.1 )

			trigger:Deactivate()
		</script>

	</trigger>

	<trigger Name="trMsg01" active="0">
	<event msgid="27" eventid="GE_START_CINEMATIC_MSG" ObjName="Player1" />
		<script>
			PlayCustomMusic("Passage03")

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trStart01_cam04" active="0">
		<event flypath="Start01_cam04" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			local vehNezn = GetEntityByName("vehNezn")
			if vehNezn then
				vehNezn:SetExternalPathByName("vehNezn_path02")
			end

			AddCinematicMessage( 28, 0.1 )

			trigger:Deactivate()
		</script>

	</trigger>

	<trigger Name="RolikEnd_Start01" active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
			RestoreAllToleranceStatus()
			SetTolerance( 1100, 1048, RS_ENEMY )

			local vehPlayer = GetPlayerVehicle()
			local PlfCoor = vehPlayer:GetPosition()
			local vehNezn = GetEntityByName("vehNezn")

			if vehNezn then vehNezn:Remove() end

			if vehPlayer then
				vehPlayer:SetExternalPathByName("player_path01")
				vehPlayer:PlaceToEndOfPath("player_path01")
				vehPlayer:SetRotation(Quaternion(0.000, -0.830, -0.001, 0.558))
			end

			TeamCreate("AfterTunnel",1048,CVector(7624.016, 273, 4857.879),{"r2m1_Bug1"}, PlfCoor)
			local vehAfterTunnel = GetEntityByName("AfterTunnel_vehicle_0")
			if vehAfterTunnel then
				vehAfterTunnel:SetSkin(3)
				vehAfterTunnel:setImmortalMode(1)
				SetCameraDirectionToObj(vehAfterTunnel:GetId())
			end

			TActivate( "FIRSTATTACK" )

			TDeactivate("trStart01_cam02")
			TDeactivate("trStart01_cam03")
			TDeactivate("trStart01_cam04")
			TDeactivate("trMsg01")

			local b = GetEntityByName("ToR1M3")
			if b then b:SetProperty("Active",1) end

			trigger:Deactivate()
		</script>
	</trigger>





<!-- Игрок выезжает из тоннеля. Игрок ищет Акселя - убийцу отца. (2)	 -->
	<trigger Name="trStart02_cam02" active="0">
		<event flypath="Start01_cam02" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			local vehNezn = GetEntityByName("vehNezn")
			if vehNezn then
				vehNezn:SetSkin(3)
				vehNezn:SetGamePositionOnGround( CVector(7620.150, 279.045, 4857.137))
				vehNezn:SetRotation(Quaternion(-0.009, 0.052, -0.026, 0.998))
				vehNezn:SetExternalPathByName("vehNezn_path01")
			end

			AddCinematicMessage( 0, 1 )

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trStart02_cam03" active="0">
		<event flypath="Start01_cam03" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			AddCinematicMessage( 1, 0.25 )
			AddCinematicMessage( 2, 0.25  )
			AddCinematicMessage( 3, 0.25 )
			AddCinematicMessage( 4, 0.25 )
			AddCinematicMessage( 5, 0.25 )
			AddCinematicMessage( 6, 0.25 )
			AddCinematicMessage( 7, 0.25 )
			AddCinematicMessage( 8, 0.25 )
			AddCinematicMessage( 9, 0.25 )

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trMsg02" active="0">
	<event msgid="8" eventid="GE_START_CINEMATIC_MSG" ObjName="Player1" />
		<script>

			PlayCustomMusic("Passage03")
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trStart02_cam04" active="0">
		<event flypath="Start01_cam04" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			local vehNezn = GetEntityByName("vehNezn")
			if vehNezn then
				vehNezn:SetExternalPathByName("vehNezn_path02")
			end

			AddCinematicMessage( 10, 0.25 )

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="RolikEnd_Start02" active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
			RestoreAllToleranceStatus()
			SetTolerance( 1100, 1048, RS_ENEMY )

			local vehPlayer = GetPlayerVehicle()
			local PlfCoor = vehPlayer:GetPosition()
			local vehNezn = GetEntityByName("vehNezn")

			if vehNezn then vehNezn:Remove() end

			if vehPlayer then
				vehPlayer:SetExternalPathByName("player_path01")
				vehPlayer:PlaceToEndOfPath("player_path01")
				vehPlayer:SetRotation(Quaternion(0.000, -0.830, -0.001, 0.558))
			end

			TeamCreate("AfterTunnel",1048,CVector(7624.016, 273, 4857.879),{"r2m1_Bug1"}, PlfCoor)
			local vehAfterTunnel = GetEntityByName("AfterTunnel_vehicle_0")
			if vehAfterTunnel then
				vehAfterTunnel:SetSkin(3)
				vehAfterTunnel:setImmortalMode(1)
				SetCameraDirectionToObj(vehAfterTunnel:GetId())
			end

			TActivate( "FIRSTATTACK" )

			TDeactivate("trStart02_cam02")
			TDeactivate("trStart02_cam03")
			TDeactivate("trStart02_cam04")
			TDeactivate("trMsg02")

			local b = GetEntityByName("ToR1M3")
			if b then b:SetProperty("Active",1) end

			trigger:Deactivate()
		</script>
	</trigger>





<!-- 3. Игрок убивает машинку перед тоннелем -->
	<trigger Name="RolikBegin_FIRSTATTACK" active="0">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			SetTolerance( 1100, 1048, RS_NEUTRAL )
			SaveAllToleranceStatus(RS_NEUTRAL)

			local vehNezn = GetEntityByName("AfterTunnel_vehicle_0")
			local vehNeznID = vehNezn:GetId()
			local Plf = GetPlayerVehicle()
			local PlfID = GetPlayerVehicleId()
			local PlfCoor = Plf:GetPosition()
			local NeznCoor = vehNezn:GetPosition()

			PlfCoor.x = PlfCoor.x + 20
			PlfCoor.y = PlfCoor.y + 5
			PlfCoor.z = PlfCoor.z - 20

			NeznCoor.x = PlfCoor.x + 20
			NeznCoor.y = PlfCoor.y + 5
			NeznCoor.z = PlfCoor.z + 20

			Plf:SetCustomControlEnabled( true )
			Plf:SetCustomLinearVelocity( 0 )
			Plf:SetThrottle( 0 )
			Plf:SetCustomControlEnabled( false )

			FlyAround( 1, 0, 20, 14, PlfCoor, vehNeznID, 1, 0 )
			FlyAround( 1, 0, 20, 5, NeznCoor, PlfID, 0, 1 )
			StartCinematic()
			AddCinematicMessage( 11, 1 )
			AddCinematicMessage( 12, 0.1 )

			TActivate("RolikEnd_FIRSTATTACK")
			TActivate("trFIRSTATTACK_PathOut")
			TDeactivate("FIRSTATTACK")

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trFIRSTATTACK_PathOut" active="0">
		<event timeout="10" eventid="GE_TIME_PERIOD" />
		<script>
		local vehNezn = GetEntityByName("AfterTunnel")
			if vehNezn then
				vehNezn:StackOpen()
				vehNezn:SetDestination(CVector(7780.687, 293.455, 4965.787))
				vehNezn:StackClose()
			end

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="RolikEnd_FIRSTATTACK" active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
			RestoreAllToleranceStatus()

			local vehAfterTunnel = GetEntityByName("AfterTunnel_vehicle_0")
			if vehAfterTunnel then
				vehAfterTunnel:Remove()
			end

			TDeactivate("RolikBegin_FIRSTATTACK")
			TDeactivate("trFIRSTATTACK_PathOut")

			TakeQuest( "d_FindVerbInAR_Quest" )

			AddBook("r1_book_ar_flyer")

			StopPlayingCustomMusic()

			SetCameraBehindPlayerVehicle()

			trigger:Deactivate()
		</script>
	</trigger>





<!-- Машинка игрока останавливается -->
	<trigger Name="trVehSTOP" active="0">
 		<event eventid="GE_CINEMATIC_ENTER_FADE_IN" ObjName="Player1" />
		<script>
			local vehPlayer = GetPlayerVehicle()
			if vehPlayer then
				vehPlayer:SetCustomControlEnabled( true )
				vehPlayer:SetCustomLinearVelocity( 0 )
				vehPlayer:SetThrottle( 0 )
				vehPlayer:SetCustomControlEnabled( false )
			end

			trigger:Deactivate()
		</script>
	</trigger>





<!-- засада на генерала АР -->
	<trigger Name="RolikBegin_TAKEBOSSARLOC" active="0">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			SaveAllToleranceStatus(RS_NEUTRAL)

			local vehSNG = GetEntityByName("SNGTeamFighters_vehicle_1")
			local vehSNGID = vehSNG:GetId()
			local vehSNGCoor = vehSNG:GetPosition()

			local vehAR = GetEntityByName("BossARCar_vehicle_2")
			local vehARID = vehAR:GetId()
			local vehARCoor = vehAR:GetPosition()
			vehARCoor.x = vehARCoor.x + 10
			vehARCoor.y = vehARCoor.y + 50
			vehARCoor.z = vehARCoor.z + 10

			local Plf = GetPlayerVehicle()
			local PlfID = GetPlayerVehicleId()

			FlyLinked( "TAKEBOSSARLOC_cam01", vehSNGID, 5, 1, 0, PlfID, nil, nil, nil, nil )
			FlyAround( 1, 0, 10, 4, vehARCoor, vehARID, 0, 1 )
			StartCinematic()

			AddCinematicMessage( 21, 0.5 )

			TActivate("RolikEnd_TAKEBOSSARLOC")
			TActivate("trTAKEBOSSARLOC")

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trTAKEBOSSARLOC" active="0">
		<event eventid="GE_CINEMATIC_ENTER_FADE_IN" ObjName="Player1" />
		<script>
			local vehPlayer = GetPlayerVehicle()
			if vehPlayer then
				vehPlayer:SetGamePositionOnGround( CVector(6383.364, 313.205, 1203.239))
				vehPlayer:SetRotation(Quaternion(-0.015, 0.964, 0.015, -0.266))
				vehPlayer:SetExternalPathByName("player_path02")
				vehPlayer:SetThrottle(1)
				vehPlayer:SetCustomLinearVelocity(20)
			end

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="RolikEnd_TAKEBOSSARLOC" active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
			RestoreAllToleranceStatus()
			SetTolerance( 1100, 1015, RS_ENEMY )
			SetTolerance( 1016, 1015, RS_ENEMY )

			local vehPlayer = GetPlayerVehicle()
			if vehPlayer then
				vehPlayer:PlaceToEndOfPath("player_path02")
			end

			TDeactivate("RolikBegin_TAKEBOSSARLOC")
			TDeactivate("trTAKEBOSSARLOC")

			SetCameraBehindPlayerVehicle()

			trigger:Deactivate()
		</script>
	</trigger>





<!-- игрок натыкается на лису -->
	<trigger Name="RolikBegin_Lisa" active="0">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			SaveAllToleranceStatus(RS_NEUTRAL)

			PlayCustomMusic("IntenseDialogue02")

			RuleConsole("cinematic_spring_coeff 5.7")

			local Plf = GetPlayerVehicle()
			local PlfID = GetPlayerVehicleId()

			Fly("Lisa_cam01", CINEMATIC_NO_AIM, 0, 4, 1, 0 )
			FlyLinked( "Lisa_cam02", PlfID, 4, 0, 0, nil, nil, true, nil, nil )
			Fly("Lisa_cam03", CINEMATIC_NO_AIM, 0, 15, 0, 1 )
			StartCinematic()

			TActivate("RolikEnd_Lisa")
			TActivate("trLisa_cam01")
			TActivate("trLisa_cam03")

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trLisa_cam01" active="0">
		<event eventid="GE_CINEMATIC_ENTER_FADE_IN" ObjName="Player1" />
		<script>
			local vehPlayer = GetPlayerVehicle()
			if vehPlayer then
				vehPlayer:SetGamePositionOnGround( CVector(5980.723, 251.750, 6480.860))
				vehPlayer:SetRotation(Quaternion(-0.020, 0.015, 0.004, 1.000))
				vehPlayer:SetCustomControlEnabled( true )
				vehPlayer:SetExternalPathByName("player_path03")
				vehPlayer:SetCustomControlEnabled( false )
				vehPlayer:SetThrottle(0)
				vehPlayer:SetCustomLinearVelocity(0)
			end

			CreateVehicleEx("LisaCar","vehLisa_0",( CVector(6110.662, 251.541, 6607.340) ), 1042)
			local vehLisa = GetEntityByName("vehLisa_0")
			if vehLisa then
				vehLisa:SetSkin(2)
				vehLisa:SetRotation(Quaternion(-0.001, -0.792, -0.000, 0.611))
				vehLisa:SetExternalPathByName("lisa_path01")
				vehLisa:SetThrottle(1)
				vehLisa:SetCustomLinearVelocity(20)
			end

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trLisa_cam03" active="0">
		<event flypath="Lisa_cam03" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			AddCinematicMessage( 29, 1 )
			AddCinematicMessage( 30, 5 )

			TActivate( "trLisa_PathOut")

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trLisa_PathOut" active="0">
		<event timeout="8" eventid="GE_TIME_PERIOD" />
		<script>
			local vehLisa = GetEntityByName("vehLisa_0")
			if vehLisa then
				vehLisa:SetExternalPathByName("lisa_path02")
				vehLisa:SetThrottle(1)
				vehLisa:SetCustomLinearVelocity(5)
			end

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="RolikEnd_Lisa" active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
			RestoreAllToleranceStatus()
			SetTolerance( 1100, 1042, RS_ENEMY )

			local vehLisa = GetEntityByName("vehLisa_0")
			if vehLisa then
				vehLisa:Remove()
			end

			local vehPlayer = GetPlayerVehicle()
			if vehPlayer then
				vehPlayer:PlaceToEndOfPath("player_path03")
			end

			CompleteQuest( "d_FindLisaInGelvetcia_Quest" )

			TeamCreate("LisaInCar",1042,CVector(6032.294, 249, 6565.459),{"LisaCar"})
			local FVehicle = GetEntityByName("LisaInCar_vehicle_0")
			if FVehicle then
				FVehicle:AddItemsToRepository("cooling_system_guns_and_firing_rate_guns", 1)
				FVehicle:SetSkin ( 2 )
				FVehicle:setImmortalMode(1)
				SetCameraDirectionToObj(FVehicle:GetId())
			end

			TActivate ("LISADIED")

			TDeactivate("RolikBegin_Lisa")
			TDeactivate("trLisa_cam01")
			TDeactivate("trLisa_cam03")
			TDeactivate("trLisa_PathOut")

			StopPlayingCustomMusic()

			RuleConsole("cinematic_spring_coeff 0.7")

			trigger:Deactivate()
		</script>
	</trigger>





<!-- игрок побеждает лису. -->
	<trigger Name="RolikBegin_LISADIED" active="0">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			PlayCustomMusic("QuietDialogue04")

			SetTolerance( 1100, 1042, RS_ALLY )
			SaveAllToleranceStatus(RS_NEUTRAL)

			Fly("LISADIED_cam01", CINEMATIC_NO_AIM, 0, 6, 1, 0 )
			Fly("LISADIED_cam02", CINEMATIC_NO_AIM, 0, 6, 0, 0 )
			Fly("LISADIED_cam03", CINEMATIC_NO_AIM, 0, 6, 0, 0 )
			Fly("LISADIED_cam04", CINEMATIC_NO_AIM, 0, 10, 0, 0 )
			Fly("LISADIED_cam05", CINEMATIC_NO_AIM, 0, 42, 0, 0 )
			Fly("LISADIED_cam06", CINEMATIC_NO_AIM, 0, 9, 0, 0 )
			Fly("LISADIED_cam07", CINEMATIC_NO_AIM, 0, 6, 0, 0 )
			Fly("LISADIED_cam08", CINEMATIC_NO_AIM, 0, 19, 0, 0 )
			Fly("LISADIED_cam09", CINEMATIC_NO_AIM, 0, 9, 0, 0 )
			Fly("LISADIED_cam10", CINEMATIC_NO_AIM, 0, 36, 0, 1 )
			StartCinematic()

			TActivate("RolikEnd_LISADIED")
			TActivate("trLISADIED_cam01")
			TActivate("trLISADIED_cam02")
			TActivate("trLISADIED_cam03")
			TActivate("trLISADIED_cam04")
			TActivate("trLISADIED_cam05")
			TActivate("trLISADIED_cam06")
			TActivate("trLISADIED_cam07")
			TActivate("trLISADIED_cam08")
			TActivate("trLISADIED_cam09")
			TActivate("trLISADIED_cam10")
			TActivate("trLISADIED_msg36")
			TActivate("trLISADIED_msg37_39")
			TActivate("trLISADIED_msg45")
			TActivate("trLISADIED_msg46")
			TActivate("trLISADIED_msg47")
			TActivate("trLISADIED_msg48")

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trLISADIED_cam01" active="0">
		<event eventid="GE_CINEMATIC_ENTER_FADE_IN" ObjName="Player1" />
		<script>
			local FVehicle = GetEntityByName("LisaInCar_vehicle_0")
			if FVehicle then
				FVehicle:Remove()
			end

			local vehPlayer = GetPlayerVehicle()
			if vehPlayer then
				vehPlayer:SetThrottle(0)
				vehPlayer:SetCustomLinearVelocity(0)
				vehPlayer:SetGamePositionOnGround( CVector(6028.542, 251.587, 6579.957))
				vehPlayer:SetRotation(Quaternion(-0.002, 0.490, -0.002, 0.872))
			end

			CreateVehicleEx("LisaCar","vehLisa_0",( CVector(6055.441, 251.229, 6577.806) ), 1042)
			local vehLisa = GetEntityByName("vehLisa_0")
			if vehLisa then
				vehLisa:SetSkin(2)
				vehLisa:SetRotation(Quaternion(-0.000, -0.807, -0.001, 0.591))
				vehLisa:SetThrottle(0)
				vehLisa:SetCustomLinearVelocity(0)
			end

			CreateNewDummyObject( "dweller_lisa", "humLisa", -1, -1, CVector(6046.292, 249.190, 6583.665), Quaternion(0.000, -0.746, 0.000, 0.666), 1)
			CreateNewDummyObject( "dweller_player", "humPlayer", -1, -1, CVector(6044.253, 249.267, 6583.188), Quaternion(0.000, 0.487, 0.000, 0.874), 0)

			getObj("humPlayer"):SetNodeAction(AT_STAND1)
			getObj("humPlayer"):SetNextForAnimation(AT_STAND1, AT_STAND1)
			getObj("humLisa"):SetNodeAction(AT_STAND2)
			getObj("humLisa"):SetNextForAnimation(AT_STAND2, AT_STAND1)

			AddCinematicMessage( 31, 1)

			trigger:Deactivate()
		</script>
	</trigger>
	<trigger Name="trLISADIED_cam02" active="0">
		<event flypath="LISADIED_cam02" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			getObj("humPlayer"):SetNodeAction(AT_RESERVED1)
			getObj("humPlayer"):SetNextForAnimation(AT_RESERVED1, AT_STAND1)
			getObj("humLisa"):SetNodeAction(AT_STAND1)
			getObj("humLisa"):SetNextForAnimation(AT_STAND1, AT_STAND1)

			AddCinematicMessage( 32, 0.5)

			trigger:Deactivate()
		</script>
	</trigger>
	<trigger Name="trLISADIED_cam03" active="0">
		<event flypath="LISADIED_cam03" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			getObj("humPlayer"):SetNodeAction(AT_STAND1)
			getObj("humPlayer"):SetNextForAnimation(AT_STAND1, AT_STAND1)
			getObj("humLisa"):SetNodeAction(AT_STAND2)
			getObj("humLisa"):SetNextForAnimation(AT_STAND2, AT_STAND2, AT_STAND1)

			AddCinematicMessage( 33, 0.5)

			trigger:Deactivate()
		</script>
	</trigger>
	<trigger Name="trLISADIED_cam04" active="0">
		<event flypath="LISADIED_cam04" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			getObj("humPlayer"):SetNodeAction(AT_RESERVED1)
			getObj("humPlayer"):SetNextForAnimation(AT_RESERVED1, AT_RESERVED1, AT_STAND1)
			getObj("humLisa"):SetNodeAction(AT_STAND1)
			getObj("humLisa"):SetNextForAnimation(AT_STAND1, AT_STAND1)

			AddCinematicMessage( 34, 0.5)

			trigger:Deactivate()
		</script>
	</trigger>
	<trigger Name="trLISADIED_cam05" active="0">
		<event flypath="LISADIED_cam05" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			getObj("humPlayer"):SetNodeAction(AT_STAND1)
			getObj("humPlayer"):SetNextForAnimation(AT_STAND1, AT_STAND1)
			getObj("humLisa"):SetNodeAction(AT_STAND2)
			getObj("humLisa"):SetNextForAnimation(AT_STAND2, AT_STAND1)

			AddCinematicMessage( 35, 0.5)
			AddCinematicMessage( 36, 0.5)
			AddCinematicMessage( 37, 0.5)
			AddCinematicMessage( 38, 0.5)
			AddCinematicMessage( 39, 0.5)

			trigger:Deactivate()
		</script>
	</trigger>
	<trigger Name="trLISADIED_cam06" active="0">
		<event flypath="LISADIED_cam06" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			getObj("humPlayer"):SetNodeAction(AT_RESERVED1)
			getObj("humPlayer"):SetNextForAnimation(AT_RESERVED1, AT_RESERVED1, AT_STAND1)
			getObj("humLisa"):SetNodeAction(AT_STAND1)
			getObj("humLisa"):SetNextForAnimation(AT_STAND1, AT_STAND1)

			AddCinematicMessage( 40, 0.5)

			trigger:Deactivate()
		</script>
	</trigger>
	<trigger Name="trLISADIED_cam07" active="0">
		<event flypath="LISADIED_cam07" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			getObj("humPlayer"):SetNodeAction(AT_STAND1)
			getObj("humPlayer"):SetNextForAnimation(AT_STAND1, AT_STAND1)
			getObj("humLisa"):SetNodeAction(AT_STAND2)
			getObj("humLisa"):SetNextForAnimation(AT_STAND2, AT_STAND1)

			AddCinematicMessage( 41, 0.5)

			trigger:Deactivate()
		</script>
	</trigger>
	<trigger Name="trLISADIED_cam08" active="0">
		<event flypath="LISADIED_cam08" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			getObj("humPlayer"):SetNodeAction(AT_RESERVED1)
			getObj("humPlayer"):SetNextForAnimation(AT_RESERVED1, AT_RESERVED1, AT_STAND1)
			getObj("humLisa"):SetNodeAction(AT_STAND1)
			getObj("humLisa"):SetNextForAnimation(AT_STAND1, AT_STAND1)

			AddCinematicMessage( 42, 0.5)

			trigger:Deactivate()
		</script>
	</trigger>
	<trigger Name="trLISADIED_cam09" active="0">
		<event flypath="LISADIED_cam09" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			getObj("humPlayer"):SetNodeAction(AT_STAND1)
			getObj("humPlayer"):SetNextForAnimation(AT_STAND1, AT_STAND1)
			getObj("humLisa"):SetNodeAction(AT_STAND2)
			getObj("humLisa"):SetNextForAnimation(AT_STAND2, AT_STAND1)

			AddCinematicMessage( 43, 0.5)

			trigger:Deactivate()
		</script>
	</trigger>
	<trigger Name="trLISADIED_cam10" active="0">
		<event flypath="LISADIED_cam10" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			getObj("humPlayer"):SetNodeAction(AT_RESERVED1)
			getObj("humPlayer"):SetNextForAnimation(AT_RESERVED1, AT_STAND1)
			getObj("humLisa"):SetNodeAction(AT_STAND1)
			getObj("humLisa"):SetNextForAnimation(AT_STAND1, AT_STAND1)

			AddCinematicMessage( 44, 0.5)
			AddCinematicMessage( 45, 0.5)
			AddCinematicMessage( 46, 0.5)
			AddCinematicMessage( 47, 0.5)
			AddCinematicMessage( 48, 0.5)

			trigger:Deactivate()
		</script>
	</trigger>
	<trigger Name="RolikEnd_LISADIED" active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
			RestoreAllToleranceStatus()
			SetTolerance( 1042, 1005, RS_ENEMY )
			SetTolerance( 1042, 1002, RS_ENEMY )

			CompleteQuest( "d_WinLisaInBattle_Quest" )

			local humLisa = GetEntityByName("humLisa")
			if humLisa then
				humLisa:Remove()
			end

			local humPlayer = GetEntityByName("humPlayer")
			if humPlayer then
				humPlayer:Remove()
			end

			local FVehicle = GetEntityByName("vehLisa_0")
			if FVehicle then
				FVehicle:Remove()
			end

			local Plf = GetPlayerVehicle()
			local PlfID = GetPlayerVehicleId()
			local PlfCoor = Plf:GetPosition()

			TeamCreate("LisaInCar",1042,CVector(6017,249,6571),{"LisaCar"}, PlfCoor)
			local FVehicle = GetEntityByName("LisaInCar_vehicle_0")
			if FVehicle then
				FVehicle:SetSkin ( 2 )
				FVehicle:setImmortalMode(1)
			end

			local newControllerId = CreateNewObject {
				prototypeName	= "someNPCMotionController",
				objName		= "LisaCont"
			}

			local newController = GetEntityByID(newControllerId)
			local FVehicle = GetEntityByName("LisaInCar_vehicle_0")
			if FVehicle then
				newController:setVehicleUnderControl(FVehicle)
			end

			TActivate("PARISTUBEREMOVE")

			TDeactivate("RolikBegin_LISADIED")
			TDeactivate("trLISADIED_cam01")
			TDeactivate("trLISADIED_cam02")
			TDeactivate("trLISADIED_cam03")
			TDeactivate("trLISADIED_cam04")
			TDeactivate("trLISADIED_cam05")
			TDeactivate("trLISADIED_cam06")
			TDeactivate("trLISADIED_cam07")
			TDeactivate("trLISADIED_cam08")
			TDeactivate("trLISADIED_cam09")
			TDeactivate("trLISADIED_cam10")
			TDeactivate("trLISADIED_msg36")
			TDeactivate("trLISADIED_msg37_39")
			TDeactivate("trLISADIED_msg45")
			TDeactivate("trLISADIED_msg46")
			TDeactivate("trLISADIED_msg47")
			TDeactivate("trLISADIED_msg48")

			StopPlayingCustomMusic()

			SetCameraBehindPlayerVehicle()

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trLISADIED_msg36" active="0">
		<event msgid="36" eventid="GE_START_CINEMATIC_MSG" ObjName="Player1" />
		<script>

			getObj("humPlayer"):SetNodeAction(AT_RESERVED1)
			getObj("humPlayer"):SetNextForAnimation(AT_RESERVED1, AT_STAND1)
			getObj("humLisa"):SetNodeAction(AT_STAND1)
			getObj("humLisa"):SetNextForAnimation(AT_STAND1, AT_STAND1)

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trLISADIED_msg37_39" active="0">
--		<event timeout="11" eventid="GE_TIME_PERIOD" />
		<event msgid="37" eventid="GE_START_CINEMATIC_MSG" ObjName="Player1" />

		<script>

			getObj("humPlayer"):SetNodeAction(AT_STAND1)
			getObj("humPlayer"):SetNextForAnimation(AT_STAND1, AT_STAND1)
			println("gg_anim_set")
			getObj("humLisa"):SetNodeAction(AT_STAND2)
			getObj("humLisa"):SetNextForAnimation(AT_STAND2, AT_STAND2)
			getObj("humLisa"):SetNextForAnimation(AT_STAND2, AT_STAND2)
			println("lisas_anim_set")

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trLISADIED_msg45" active="0">
		<event msgid="45" eventid="GE_START_CINEMATIC_MSG" ObjName="Player1" />
		<script>

			getObj("humPlayer"):SetNodeAction(AT_STAND1)
			getObj("humPlayer"):SetNextForAnimation(AT_STAND1, AT_STAND1)
			getObj("humLisa"):SetNodeAction(AT_STAND2)
			getObj("humLisa"):SetNextForAnimation(AT_STAND2, AT_STAND1)

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trLISADIED_msg46" active="0">
		<event msgid="46" eventid="GE_START_CINEMATIC_MSG" ObjName="Player1" />
		<script>

			getObj("humPlayer"):SetNodeAction(AT_RESERVED1)
			getObj("humPlayer"):SetNextForAnimation(AT_RESERVED1, AT_STAND1)
			getObj("humLisa"):SetNodeAction(AT_STAND1)
			getObj("humLisa"):SetNextForAnimation(AT_STAND1, AT_STAND1)

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trLISADIED_msg47" active="0">
		<event msgid="47" eventid="GE_START_CINEMATIC_MSG" ObjName="Player1" />
		<script>

			getObj("humPlayer"):SetNodeAction(AT_STAND1)
			getObj("humPlayer"):SetNextForAnimation(AT_STAND1, AT_STAND1)
			getObj("humLisa"):SetNodeAction(AT_STAND2)
			getObj("humLisa"):SetNextForAnimation(AT_STAND2, AT_STAND2, AT_STAND1)

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trLISADIED_msg48" active="0">
		<event msgid="48" eventid="GE_START_CINEMATIC_MSG" ObjName="Player1" />
		<script>

			getObj("humPlayer"):SetNodeAction(AT_RESERVED1)
			getObj("humPlayer"):SetNextForAnimation(AT_RESERVED1, AT_RESERVED1, AT_STAND1)
			getObj("humLisa"):SetNodeAction(AT_STAND1)
			getObj("humLisa"):SetNextForAnimation(AT_STAND1, AT_STAND1)

			trigger:Deactivate()
		</script>
	</trigger>

<!-- Игрок приезжает в Париж -->
	<trigger Name="RolikBegin_OPARIS" active="0">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			SaveAllToleranceStatus(RS_NEUTRAL)

			RuleConsole("cinematic_spring_coeff 1.7")

			CreateNewDummyObject( "cargo", "CamTochka", -1, -1, CVector(2143.560, 232.963, 5914.079), Quaternion(0, 0, 0, 0), 0)

			local CToch = GetEntityByName("CamTochka")
			local CTochID = CToch:GetId()
			local Plf = GetPlayerVehicle()
			local PlfID = GetPlayerVehicleId()
			local Cont = GetEntityByName("boss02cont")
			local ContID = Cont:GetId()

			Fly("OPARIS_cam01", CINEMATIC_NO_AIM, 0, 6, 1, 0 )
			Fly("OPARIS_cam02", CINEMATIC_NO_AIM, 0, 20, 0, 0 )
			FlyLinked("BOSSDIE_cam02", CTochID, 10, 0, 0, ContID, nil, nil, nil, nil )
			Fly("OPARIS_cam04", CINEMATIC_NO_AIM, 0, 4, 0, 1 )
			StartCinematic()

			TActivate("RolikEnd_OPARIS")
			TActivate("trOPARIS_cam01")
			TActivate("trOPARIS_cam02")
			TActivate("trOPARIS_cam03")

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trOPARIS_cam01" active="0">
		<event eventid="GE_CINEMATIC_ENTER_FADE_IN" ObjName="Player1" />
		<script>
			local vehPlayer = GetPlayerVehicle()
			if vehPlayer then
				vehPlayer:SetGamePositionOnGround( CVector(2217.584, 235.522, 5753.800))
				vehPlayer:SetRotation(Quaternion(-0.002, -0.266, 0.002, 0.964))
				vehPlayer:SetThrottle(0)
				vehPlayer:SetCustomLinearVelocity(0)
			end

			local vehLisa = GetEntityByName("LisaInCar_vehicle_0")
			if vehLisa then
				vehLisa:SetGamePositionOnGround( CVector(2221.520, 235.525, 5766.983))
				vehLisa:SetRotation(Quaternion(-0.003, -0.498, 0.001, 0.867))
				vehLisa:SetThrottle(0)
				vehLisa:SetCustomLinearVelocity(0)
			end

			AddCinematicMessage( 49, 1 )

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trOPARIS_cam02" active="0">
		<event flypath="OPARIS_cam02" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			PlayCustomMusic("Passage04")

			AddCinematicMessage( 50, 1 )
			AddCinematicMessage( 51, 1 )

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trOPARIS_cam03" active="0">
		<event flypath="BOSSDIE_cam02" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			PlayCustomMusic("Passage03b")

			local boss02 = GetEntityByName("ParisBoss")
			local BossGo = 1
			if boss02 then
				boss02:NextState()
				SetVar("Go",BossGo)
			end

			AddCinematicMessage( 52, 1 )

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="RolikEnd_OPARIS" active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
			RestoreAllToleranceStatus()
			SetTolerance( 1042, 1002, RS_ENEMY )
			SetTolerance( 1042, 1005, RS_ENEMY )

			RuleConsole("cinematic_spring_coeff 0.7")

			local CToch = GetEntityByName("CamTochka")
			local BossGo = GetVar("Go").AsInt
			if CToch then
				CToch:Remove()
			end

			local boss02 = GetEntityByName("ParisBoss")
			local boss02ID = boss02:GetId()
			if boss02 then
				if BossGo ~= 1 then
					boss02:NextState()
				end
				
				-- by Anton
				boss02:SetJustMovedContainerToBlock()
				
				ShowBossIndicator(boss02ID)
				SetCameraDirectionToObj(boss02ID)
			end

			TDeactivate("RolikBegin_OPARIS")
			TDeactivate("trOPARIS_cam01")
			TDeactivate("trOPARIS_cam02")
			TDeactivate("trOPARIS_cam03")

			TActivate("RolikBegin_BOSSDIE")

			trigger:Deactivate()
		</script>
	</trigger>





<!-- Смерть босса -->
	<trigger Name="RolikBegin_BOSSDIE" active="0">
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="Boss02Die_Loc" />
		<script>
			PlayCustomMusic("Techno03")

			SaveAllToleranceStatus(RS_NEUTRAL)

			local vehPlayer = GetPlayerVehicle()
			if vehPlayer then
				vehPlayer:SetThrottle(0)
				vehPlayer:SetCustomLinearVelocity(0)
			end

			CreateNewDummyObject( "cargo", "CamTochka", -1, -1, CVector(2205.656, 250.162, 5925.173), Quaternion(0, 0, 0, 0), 0)

			local CToch = GetEntityByName("CamTochka")
			local CTochID = CToch:GetId()
			local vehPID = GetPlayerVehicleId()
			local Cont = GetEntityByName("boss02cont")
			local ContID = Cont:GetId()

			FlyLinked( "BOSSDIE_cam01", vehPID , 5, 1, 0, ContID, nil, nil, nil, nil )
			FlyLinked("BOSSDIE_cam02", CTochID, 25, 0, 1, ContID, nil, nil, nil, nil )
			StartCinematic()

			TActivate("RolikEnd_BOSSDIE")

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="RolikEnd_BOSSDIE" active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
			RestoreAllToleranceStatus()
			SetTolerance( 1042, 1002, RS_ENEMY )
			SetTolerance( 1042, 1005, RS_ENEMY )

			local CToch = GetEntityByName("CamTochka")
			if CToch then
				CToch:Remove()
			end

			TDeactivate("RolikBegin_BOSSDIE")

			StopPlayingCustomMusic()

			SetCameraBehindPlayerVehicle()

			trigger:Deactivate()
		</script>
	</trigger>





<!-- мерцающее нло -->
	<trigger Name="trGeneric" active="0">
		<event timeout="0.03" eventid="GE_TIME_PERIOD" />
		<script>
			local camPos = GetCameraPos()
			camPos.x = camPos.x + 50

			local r = GetVar("R").AsInt + 1
			if r >= 100 then trigger:Deactivate() end

			local g = r
			local ON = 490.804
			local OFF = 0
			local y = 0
			if g >= 3 then
				y = ON
				RuleConsole("g_postEffect cinematic05")
			end
			if g >= 5 then
				y = OFF
				RuleConsole("g_postEffect cinematicEnd")
			end
			if g >= 10 then
				y = ON
				RuleConsole("g_postEffect cinematic05")
			end
			if g >= 12 then
				y = OFF
				RuleConsole("g_postEffect cinematicEnd")
			end
			if g >= 20 then
				y = ON
				RuleConsole("g_postEffect cinematic01")
			end
			if g >= 23 then
				y = OFF
--				RuleConsole("g_postEffect cinematicEnd")
			end
			if g >= 26 then y = ON end
			if g >= 28 then y = OFF  end
			if g >= 30 then y = ON  end
			if g >= 33 then y = OFF  end
			if g >= 35 then y = ON  end
			if g >= 38 then y = OFF  end
			if g >= 40 then y = ON end
			if g >= 45 then
				y = OFF
				RuleConsole("g_postEffect cinematic03")
			end
			if g >= 50 then
				y = ON
				RuleConsole("g_postEffect cinematic05")
			end
			if g >= 52 then
				y = OFF
				RuleConsole("g_postEffect cinematic04")
			end
			if g >= 60 then
				y = ON
				RuleConsole("g_postEffect cinematic05")
			end
			if g >= 62 then
				y = OFF
				RuleConsole("g_postEffect cinematic02")
			end
			if g >= 66 then
				y = ON
				RuleConsole("g_postEffect cinematic05")
			end
			if g >= 69 then
				y = OFF
				RuleConsole("g_postEffect cinematic03")
			end
			if g >= 71 then
				y = ON
				RuleConsole("g_postEffect cinematic05")
			end
			if g >= 80 then
				y = OFF
				RuleConsole("g_postEffect cinematic04")
			end
			if g >= 83 then
				y = ON
				RuleConsole("g_postEffect cinematic05")
			end
			if g >= 90 then
				y = OFF
				RuleConsole("g_postEffect cinematic02")
			end
			if g >= 93 then
				y = ON
				RuleConsole("g_postEffect cinematic05")
			end

			if y ~= ON then 
				CreateEffectTTLed("ET_PS_UFO01", CVector(camPos), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 1000)
			end
			if g >= 98 then  RuleConsole("g_postEffect cinematicEnd") end

			if 20 >= g then
				getObj("AliensShip"):SetPosition( CVector(1366.725, 0, 1801.638))
			end
			if g >= 21 then
			getObj("AliensShip"):SetPosition( CVector(1366.725, y, 1801.638)) 
			end
			if g >= 40 then
				getObj("AliensShip"):SetPosition( CVector(1366.725, 490.804, 1801.638))
			end

			SetVar("R", r)
		</script>
	</trigger>





<!-- Тарелку под землю -->
	<trigger Name="trAliensShipAnderEarth" active="1">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			local y = 0

			getObj("AliensShip"):SetPosition( CVector(1366.725, y, 1801.638)) 

			trigger:Deactivate()
		</script>
	</trigger>





<!-- эфекты на електростанции -->
	<trigger Name="trLightOn" active="1">
		<event timeout="0.1" eventid="GE_TIME_PERIOD" />
		<script>
			local y = 276.525

			CreateNewSgNodeObject("ET_PS_LENS_D5", "p003", -1, -1, CVector(6242.927, 5.403 + y, 4402.030), Quaternion(0.0000, 0.0000, 0.0000, 1.0000))
			CreateNewSgNodeObject("ET_PS_LENS_D5", "p004", -1, -1, CVector(6021.822, 23.762 + y, 4376.930), Quaternion(0.0000, 0.0000, 0.0000, 1.0000))
			CreateNewSgNodeObject("ET_PS_LENS_D5", "p005", -1, -1, CVector(6019.808, 23.762 + y, 4372.996), Quaternion(0.0000, 0.0000, 0.0000, 1.0000))
			CreateNewSgNodeObject("ET_PS_LENS_D5", "p006", -1, -1, CVector(6204.051, 5.403 + y, 4428.498), Quaternion(0.0000, 0.0000, 0.0000, 1.0000))
			CreateNewSgNodeObject("ET_PS_LENS_D5", "p007", -1, -1, CVector(6211.564, 5.403 + y, 4356.677), Quaternion(0.0000, 0.0000, 0.0000, 1.0000))
			CreateNewSgNodeObject("ET_PS_LENS_D5", "p008", -1, -1, CVector(6173.076, 5.403 + y, 4383.687), Quaternion(0.0000, 0.0000, 0.0000, 1.0000))
			CreateNewSgNodeObject("ET_PS_BOSS2_MAIN", "p009", -1, -1, CVector(5985.193, 0.000 + y, 4396.228), Quaternion(0.0000, 0.0000, 0.0000, 1.0000))
			CreateNewSgNodeObject("ET_PS_SPARKLE_BIG_MAIN2", "p010", -1, -1, CVector(6267.566, 15.772 + y, 4388.441), Quaternion(0.0000, 0.0000, 0.0000, 1.0000))
			CreateNewSgNodeObject("ET_PS_SPARKLE_BIG_MAIN2", "p011", -1, -1, CVector(6225.648, 15.772 + y, 4410.056), Quaternion(0.0000, 0.0000, 0.0000, 1.0000))
			CreateNewSgNodeObject("ET_PS_SPARKLE_BIG_MAIN", "p012", -1, -1, CVector(6248.037, 19.651 + y, 4398.562), Quaternion(0.0000, 0.0000, 0.0000, 1.0000))
			CreateNewSgNodeObject("ET_PS_SPARKLE_BIG_MAIN1", "p013", -1, -1, CVector(6258.379, 10.854 + y, 4391.873), Quaternion(0.0000, 0.0000, 0.0000, 1.0000))
			CreateNewSgNodeObject("ET_PS_SPARKLE_BIG_MAIN1", "p014", -1, -1, CVector(6242.969, 5.759 + y, 4402.217), Quaternion(0.0000, 0.0000, 0.0000, 1.0000))
			CreateNewSgNodeObject("ET_PS_SPARKLE_BIG_MAIN2", "p015", -1, -1, CVector(6226.852, 10.621 + y, 4346.274), Quaternion(0.0000, 0.0000, 0.0000, 1.0000))
			CreateNewSgNodeObject("ET_PS_SPARKLE_BIG_MAIN2", "p016", -1, -1, CVector(6216.646, 10.578 + y, 4418.399), Quaternion(0.0000, 0.0000, 0.0000, 1.0000))
			CreateNewSgNodeObject("ET_PS_SPARKLE_BIG_MAIN1", "p017", -1, -1, CVector(6217.976, 3.830 + y, 4428.468), Quaternion(0.0000, 0.0000, 0.0000, 1.0000))
			CreateNewSgNodeObject("ET_PS_SPARKLE_BIG_MAIN1", "p018", -1, -1, CVector(6255.394, 3.830 + y, 4402.350), Quaternion(0.0000, 0.0000, 0.0000, 1.0000))
			CreateNewSgNodeObject("ET_PS_SPARKLE_BIG_MAIN1", "p019", -1, -1, CVector(6256.351, 10.630 + y, 4393.144), Quaternion(0.0000, 0.0000, 0.0000, 1.0000))
			CreateNewSgNodeObject("ET_PS_SPARKLE_BIG_MAIN", "p020", -1, -1, CVector(6258.739, 11.093 + y, 4392.267), Quaternion(0.0000, 0.0000, 0.0000, 1.0000))
			CreateNewSgNodeObject("ET_PS_ORACUL_MAIN3", "p021", -1, -1, CVector(6243.535, -15.534 + y, 4399.495), Quaternion(0.0000, 0.0000, 0.0000, 1.0000))
			CreateNewSgNodeObject("ET_PS_ORACUL_MAIN3", "p022", -1, -1, CVector(6213.134, -15.534 + y, 4356.146), Quaternion(0.0000, 0.0000, 0.0000, 1.0000))
			CreateNewSgNodeObject("ET_PS_ORACUL_MAIN3", "p023", -1, -1, CVector(5957.748, 25.884 + y, 4322.351), Quaternion(0.7290, -0.5787, -0.1097, 0.3487))
			CreateNewSgNodeObject("ET_PS_SPARKLE_BIG_MAIN2", "p0024", -1, -1, CVector(5987.222, 65.488 + y, 4390.725), Quaternion(0.0000, 0.0000, 0.0000, 1.0000))
			CreateNewSgNodeObject("ET_PS_SPARKLE_BIG_MAIN2", "p025", -1, -1, CVector(5993.972, 45.907 + y, 4408.061), Quaternion(0.0000, 0.0000, 0.0000, 1.0000))
			CreateNewSgNodeObject("ET_PS_SPARKLE_BIG_MAIN2", "p026", -1, -1, CVector(5947.930, 17.626 + y, 4332.236), Quaternion(0.0000, 0.0000, 0.0000, 1.0000))
			CreateNewSgNodeObject("ET_PS_SPARKLE_BIG_MAIN2", "p027", -1, -1, CVector(5932.408, 32.007 + y, 4343.449), Quaternion(0.0000, 0.0000, 0.0000, 1.0000))
			CreateNewSgNodeObject("ET_PS_LENS_D1", "p028", -1, -1, CVector(5961.414, 49.632 + y, 4369.348), Quaternion(0.0000, 0.0000, 0.0000, 1.0000))
			CreateNewSgNodeObject("ET_PS_LENS_D5", "p029", -1, -1, CVector(5986.168, 46.619 + y, 4396.456), Quaternion(0.0000, 0.0000, 0.0000, 1.0000))
			CreateNewSgNodeObject("ET_PS_LENS_D4", "p030", -1, -1, CVector(6018.188, 35.593 + y, 4395.552), Quaternion(0.0000, 0.0000, 0.0000, 1.0000))
			CreateNewSgNodeObject("ET_PS_LENS_D4", "p031", -1, -1, CVector(6020.208, 35.593 + y, 4398.536), Quaternion(0.0000, 0.0000, 0.0000, 1.0000))
			CreateNewSgNodeObject("ET_PS_LENS_D4", "p032", -1, -1, CVector(6022.368, 35.593 + y, 4402.399), Quaternion(0.0000, 0.0000, 0.0000, 1.0000))
			CreateNewSgNodeObject("ET_PS_LENS_D4", "p033", -1, -1, CVector(6024.400, 35.593 + y, 4405.390), Quaternion(0.0000, 0.0000, 0.0000, 1.0000))
			CreateNewSgNodeObject("ET_PS_LENS_S9", "p034", -1, -1, CVector(6000.544, 36.210 + y, 4386.690), Quaternion(0.0000, 0.0000, 0.0000, 1.0000))
			CreateNewSgNodeObject("ET_PS_LENS_D1", "p035", -1, -1, CVector(6017.873, 77.968 + y, 4402.290), Quaternion(0.0000, 0.0000, 0.0000, 1.0000))
			CreateNewSgNodeObject("ET_PS_LENS_D1", "p036", -1, -1, CVector(6017.177, 77.968 + y, 4405.025), Quaternion(0.0000, 0.0000, 0.0000, 1.0000))
			CreateNewSgNodeObject("ET_PS_LENS_D1", "p037", -1, -1, CVector(6015.383, 77.968 + y, 4402.774), Quaternion(0.0000, 0.0000, 0.0000, 1.0000))
			CreateNewSgNodeObject("ET_PS_LENS_D1", "p038", -1, -1, CVector(6013.823, 77.968 + y, 4404.696), Quaternion(0.0000, 0.0000, 0.0000, 1.0000))
			CreateNewSgNodeObject("ET_PS_LENS_D4", "p039", -1, -1, CVector(5957.439, 65.895 + y, 4392.166), Quaternion(0.0000, 0.0000, 0.0000, 1.0000))

			trigger:Deactivate()
		</script>
	</trigger>





	<trigger Name="trLightRemove" active="0">
		<event timeout="2.5" eventid="GE_TIME_PERIOD" />
		<script>
			local p = getObj("p003")	 if p then p:Remove() end
			local p = getObj("p004")	 if p then p:Remove() end
			local p = getObj("p005")	 if p then p:Remove() end
			local p = getObj("p006")	 if p then p:Remove() end
			local p = getObj("p007")	 if p then p:Remove() end
			local p = getObj("p008")	 if p then p:Remove() end
			local p = getObj("p009")	 if p then p:Remove() end
			local p = getObj("p010")	 if p then p:Remove() end
			local p = getObj("p011")	 if p then p:Remove() end
			local p = getObj("p012")	 if p then p:Remove() end
			local p = getObj("p013")	 if p then p:Remove() end
			local p = getObj("p014")	 if p then p:Remove() end
			local p = getObj("p015")	 if p then p:Remove() end
			local p = getObj("p016")	 if p then p:Remove() end
			local p = getObj("p017")	 if p then p:Remove() end
			local p = getObj("p018")	 if p then p:Remove() end
			local p = getObj("p019")	 if p then p:Remove() end
			local p = getObj("p020")	 if p then p:Remove() end
			local p = getObj("p021")	 if p then p:Remove() end
			local p = getObj("p022")	 if p then p:Remove() end
			local p = getObj("p023")	 if p then p:Remove() end
			local p = getObj("p024")	 if p then p:Remove() end
			local p = getObj("p025")	 if p then p:Remove() end
			local p = getObj("p026")	 if p then p:Remove() end
			local p = getObj("p027")	 if p then p:Remove() end
			local p = getObj("p028")	 if p then p:Remove() end
			local p = getObj("p029")	 if p then p:Remove() end
			local p = getObj("p030")	 if p then p:Remove() end
			local p = getObj("p031")	 if p then p:Remove() end
			local p = getObj("p032")	 if p then p:Remove() end
			local p = getObj("p033")	 if p then p:Remove() end
			local p = getObj("p034")	 if p then p:Remove() end
			local p = getObj("p035")	 if p then p:Remove() end
			local p = getObj("p036")	 if p then p:Remove() end
			local p = getObj("p037")	 if p then p:Remove() end
			local p = getObj("p038")	 if p then p:Remove() end
			local p = getObj("p039")	 if p then p:Remove() end

			trigger:Deactivate()
		</script>
	</trigger>





<!-- 	поочередно выключающиися эфекты		 -->
	<trigger Name="trLightOff" active="0">
		<event timeout="2.6" eventid="GE_TIME_PERIOD" />
		<script>
			local y = 276.525

			CreateEffectTTLed("ET_PS_LENS_D5", CVector(6242.927, 5.403 + y, 4402.030), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 4900)
			CreateEffectTTLed("ET_PS_LENS_D5", CVector(6021.822, 23.762 + y, 4376.930), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 4700)
			CreateEffectTTLed("ET_PS_LENS_D5", CVector(6019.808, 23.762 + y, 4372.996), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 4600)
			CreateEffectTTLed("ET_PS_LENS_D5", CVector(6204.051, 5.403 + y, 4428.498), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 4500)
			CreateEffectTTLed("ET_PS_LENS_D5", CVector(6211.564, 5.403 + y, 4356.677), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 4400)
			CreateEffectTTLed("ET_PS_LENS_D5", CVector(6173.076, 5.403 + y, 4383.687), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 4300)
			CreateEffectTTLed("ET_PS_BOSS2_MAIN", CVector(5985.193, 0.000 + y, 4396.228), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 4200)
			CreateEffectTTLed("ET_PS_SPARKLE_BIG_MAIN2", CVector(6267.566, 15.772 + y, 4388.441), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 4200)
			CreateEffectTTLed("ET_PS_SPARKLE_BIG_MAIN2", CVector(6225.648, 15.772 + y, 4410.056), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 4000)
			CreateEffectTTLed("ET_PS_SPARKLE_BIG_MAIN", CVector(6248.037, 19.651 + y, 4398.562), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 4000)
			CreateEffectTTLed("ET_PS_SPARKLE_BIG_MAIN1", CVector(6258.379, 10.854 + y, 4391.873), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 3700)
			CreateEffectTTLed("ET_PS_SPARKLE_BIG_MAIN1", CVector(6242.969, 5.759 + y, 4402.217), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 3500)
			CreateEffectTTLed("ET_PS_SPARKLE_BIG_MAIN2", CVector(6226.852, 10.621 + y, 4346.274), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 3300)
			CreateEffectTTLed("ET_PS_SPARKLE_BIG_MAIN2", CVector(6216.646, 10.578 + y, 4418.399), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 3100)
			CreateEffectTTLed("ET_PS_SPARKLE_BIG_MAIN1", CVector(6217.976, 3.830 + y, 4428.468), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 3000)
			CreateEffectTTLed("ET_PS_SPARKLE_BIG_MAIN1", CVector(6255.394, 3.830 + y, 4402.350), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 2800)
			CreateEffectTTLed("ET_PS_SPARKLE_BIG_MAIN1", CVector(6256.351, 10.630 + y, 4393.144), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 2600)
			CreateEffectTTLed("ET_PS_SPARKLE_BIG_MAIN", CVector(6258.739, 11.093 + y, 4392.267), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 2400)
			CreateEffectTTLed("ET_PS_ORACUL_MAIN3", CVector(6243.535, -15.534 + y, 4399.495), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 2200)
			CreateEffectTTLed("ET_PS_ORACUL_MAIN3", CVector(6213.134, -15.534 + y, 4356.146), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 2000)
			CreateEffectTTLed("ET_PS_ORACUL_MAIN3", CVector(5957.748, 25.884 + y, 4322.351), Quaternion(0.7290, -0.5787, -0.1097, 0.3487), 1800)
			CreateEffectTTLed("ET_PS_SPARKLE_BIG_MAIN2", CVector(5987.222, 65.488 + y, 4390.725), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 1700)
			CreateEffectTTLed("ET_PS_SPARKLE_BIG_MAIN2", CVector(5993.972, 45.907 + y, 4408.061), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 1700)
			CreateEffectTTLed("ET_PS_SPARKLE_BIG_MAIN2", CVector(5947.930, 17.626 + y, 4332.236), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 1700)
			CreateEffectTTLed("ET_PS_SPARKLE_BIG_MAIN2", CVector(5932.408, 32.007 + y, 4343.449), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 1700)
			CreateEffectTTLed("ET_PS_LENS_D1", CVector(5961.414, 49.632 + y, 4369.348), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 1600)
			CreateEffectTTLed("ET_PS_LENS_D5", CVector(5986.168, 46.619 + y, 4396.456), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 1400)
			CreateEffectTTLed("ET_PS_LENS_D4", CVector(6018.188, 35.593 + y, 4395.552), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 1200)
			CreateEffectTTLed("ET_PS_LENS_D4", CVector(6020.208, 35.593 + y, 4398.536), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 1000)
			CreateEffectTTLed("ET_PS_LENS_D4", CVector(6022.368, 35.593 + y, 4402.399), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 800)
			CreateEffectTTLed("ET_PS_LENS_D4", CVector(6024.400, 35.593 + y, 4405.390), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 600)
			CreateEffectTTLed("ET_PS_LENS_S9", CVector(6000.544, 36.210 + y, 4386.690), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 500)
			CreateEffectTTLed("ET_PS_LENS_D1", CVector(6017.873, 77.968 + y, 4402.290), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 400)
			CreateEffectTTLed("ET_PS_LENS_D1", CVector(6017.177, 77.968 + y, 4405.025), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 300)
			CreateEffectTTLed("ET_PS_LENS_D1", CVector(6015.383, 77.968 + y, 4402.774), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 200)
			CreateEffectTTLed("ET_PS_LENS_D1", CVector(6013.823, 77.968 + y, 4404.696), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 100)
			CreateEffectTTLed("ET_PS_LENS_D4", CVector(5957.439, 65.895 + y, 4392.166), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 50)

			trigger:Deactivate()
		</script>
	</trigger>





<!-- ролик с появлением тарелки -->
	<trigger Name="RolikBegin_UFO" active="0">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			PlayCustomMusic("Techno04")

			getObj("AliensShip"):SetPosition( CVector(1366.725, 0.804, 1801.638))

			Fly("UFO_cam01", CINEMATIC_NO_AIM, 0, 3.5, 0, 0 )
			Fly("UFO_cam022", CINEMATIC_NO_AIM, 0, 9, 0, 0 )
			Fly("UFO_cam03", CINEMATIC_NO_AIM, 0, 10, 0, 1 )
			StartCinematic()

			TActivate("RolikEnd_UFO")
			TActivate("trLightRemove")
			TActivate("trLightOff")
			TActivate("trUFO_cam03")

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trUFO_cam03" active="0">
		<event flypath="UFO_cam03" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			if IsQuestTaken("r2m1_TW_AlienInShip") then AddCinematicMessage( 120, 0.5 ) end
			if IsQuestTaken("r2m1_DestroyAlienShip") then AddCinematicMessage( 130, 0.5 ) end

			TActivate("trGeneric")

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="RolikEnd_UFO" active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
			getObj("AliensShip"):SetPosition( CVector(1366.725, 490.804, 1801.638))

			RuleConsole("g_postEffect cinematicEnd")

			TDeactivate("RolikBegin_LightOff")
			TDeactivate("trUFO_cam03")
			TDeactivate("trGeneric")
			TActivate("trLightRemove")

			if IsQuestTaken("r2m1_TW_AlienInShip") then
				PlayCustomMusic("Techno01")

				CreateNewDummyObject( "boss04dronegun", "Droid", -1, -1, CVector(1282.018, 0.600, 1646.997), Quaternion(0.049, 0.950, -0.189, -0.244), 0)
				CreateNewDummyObject( "boss04drone", "Droid0", -1, -1, CVector(1282.018, 0.600, 1646.997), Quaternion(0.049, 0.950, -0.189, -0.244), 0)
				CreateNewDummyObject( "dweller_player", "humPlayer", -1, -1, CVector(1228.499, 0.600, 1502.986), Quaternion(-0.065, 0.205, -0.028, 0.976), 1)

				local CToch = GetEntityByName("Droid")
				local CTochID = CToch:GetId()
				local vehPID = GetPlayerVehicleId()
				local humPlID = GetEntityByName("humPlayer"):GetId()

				RuleConsole("cinematic_spring_coeff 1.7")

				Fly(		"UFODIOLOG_cam01", CINEMATIC_NO_AIM, 0, 5, 0, 0 )
				FlyLinked(	"BattleUFO_cam01", CTochID , 5, 0, 0, humPlID, nil, nil, nil, nil )
				Fly(		"UFODIOLOG_cam02", CINEMATIC_NO_AIM, 0, 7, 0, 0 )
				FlyLinked(	"UFODIOLOG_cam03", CTochID , 14, 0, 0, humPlID, nil, nil, nil, nil )
				Fly(		"UFODIOLOG_cam04", CINEMATIC_NO_AIM, 0, 7, 0, 0 )
				FlyLinked(	"UFODIOLOG_cam05", CTochID , 41, 0, 0, humPlID, nil, nil, nil, nil )
				Fly(		"UFODIOLOG_cam06", CINEMATIC_NO_AIM, 0, 10, 0, 0 )
				Fly(		"UFODIOLOG_cam07", CINEMATIC_NO_AIM, 0, 47, 0, 0 )
				Fly(		"UFODIOLOG_cam08", CINEMATIC_NO_AIM, 0, 7, 0, 0 )
				FlyLinked(	"UFODIOLOG_cam09", CTochID , 23, 0, 0, humPlID, nil, nil, nil, nil )
				Fly(		"UFODIOLOG_cam10", CINEMATIC_NO_AIM, 0, 18, 0, 1 )
				StartCinematic()

				TActivate("trUFODIOLOG_cam01")
				TActivate("trUFODIOLOG_cam02")
				TActivate("trUFODIOLOG_cam03")
				TActivate("trUFODIOLOG_cam04")
				TActivate("trUFODIOLOG_cam05")
				TActivate("trUFODIOLOG_cam06")
				TActivate("trUFODIOLOG_cam07")
				TActivate("trUFODIOLOG_cam08")
				TActivate("trUFODIOLOG_cam09")
				TActivate("trUFODIOLOG_cam10")
				TActivate("RolikEnd_UFODIOLOG")

				AddBelongToEncyclopaedia(1030)
			end

			if IsQuestTaken("r2m1_DestroyAlienShip") then
				PlayCustomMusic("IntenseDialogue01")

				CreateNewDummyObject( "boss04dronegun", "Droid", -1, -1, CVector(1282.018, 523.862, 1646.997), Quaternion(-0.043, -0.927, -0.115, 0.356), 0)
				CreateNewDummyObject( "boss04drone", "Droid0", -1, -1, CVector(1282.018, 523.862, 1646.997), Quaternion(-0.043, -0.927, -0.115, 0.356), 0)

				local moverId = CreateNewObject { prototypeName	= "cinematicMover", objName  = "" }
				local moverId1 = CreateNewObject { prototypeName	= "cinematicMover", objName  = "" }
				local mover = GetEntityByID( moverId ) 
				local mover1 = GetEntityByID( moverId1 )
				local controlledObj = GetEntityByName("Droid")
				local controlledObj0 = GetEntityByName("Droid0")

				if controlledObj then
					mover:SetObjAndPath( controlledObj:GetId(), "DroidMove", 60 )
				end

				if controlledObj0 then
					mover1:SetObjAndPath( controlledObj0:GetId(), "DroidMove", 60 )
				end

				local CToch = GetEntityByName("Droid")
				local CTochID = CToch:GetId()
				local vehPID = GetPlayerVehicleId()

				Fly(		"UFODIOLOG_cam01", CINEMATIC_NO_AIM, 0, 5, 0, 0 )
				FlyLinked(	"BattleUFO_cam01", CTochID , 5, 0, 0, vehPID, nil, nil, nil, nil )
				Fly(		"BattleUFO_cam02", CINEMATIC_NO_AIM, 0, 6, 0, 0 )
				Fly(		"BattleUFO_cam03", CINEMATIC_NO_AIM, 0, 6, 0, 0 )
				Fly(		"BattleUFO_cam04", CINEMATIC_NO_AIM, 0, 6, 0, 1 )
				StartCinematic()

				TActivate("trBattleUFO_cam01")
				TActivate("trBattleUFO_cam02")
				TActivate("trBattleUFO_cam03")
				TActivate("trBattleUFO_cam04")
				TActivate("RolikEnd_BattleUFO")

				AddBelongToEncyclopaedia(1030)
			end

			trigger:Deactivate()
		</script>
	</trigger>





<!-- Диолог игрока с пришельцами -->
	<trigger Name="trUFODIOLOG_cam01" active="0">
		<event eventid="GE_CINEMATIC_ENTER_FADE_IN" ObjName="Player1" />
		<script>
			local vehPlayer = GetPlayerVehicle()
			local humPl = GetEntityByName("humPlayer")
			if vehPlayer then
				vehPlayer:SetGamePositionOnGround( CVector(1233.521, 436.133, 1493.485))
				vehPlayer:SetRotation(Quaternion(-0.092, -0.183, 0.011, 0.979))
			end

			if humPl then humPl:SetPosition( CVector(1228.499, 435.600, 1502.986)) end

			local moverId = CreateNewObject { prototypeName	= "cinematicMover", objName  = "" }
			local moverId1 = CreateNewObject { prototypeName = "cinematicMover", objName  = "" }
			local mover = GetEntityByID( moverId ) 
			local mover1 = GetEntityByID( moverId1 )
			local controlledObj = GetEntityByName("Droid")
			local controlledObj1 = GetEntityByName("Droid0")
			if controlledObj then
				controlledObj:SetPosition(CVector(1282.018, 523.862, 1646.997))
				mover:SetObjAndPath( controlledObj:GetId(), "DroidMove", 200 )
			end
			if controlledObj1 then
				controlledObj1:SetPosition(CVector(1282.018, 523.862, 1646.997))
				mover1:SetObjAndPath( controlledObj1:GetId(), "DroidMove", 200 )
			end

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trUFODIOLOG_cam02" active="0">
		<event flypath="UFODIOLOG_cam02" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			AddCinematicMessage( 100, 1 )

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trUFODIOLOG_cam03" active="0">
		<event flypath="UFODIOLOG_cam03" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			RuleConsole("g_postEffect cinematic01")
			AddCinematicMessage( 101, 0.5 )

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trUFODIOLOG_cam04" active="0">
		<event flypath="UFODIOLOG_cam04" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			RuleConsole("g_postEffect cinematicEnd")
			AddCinematicMessage( 102, 0.5 )

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trUFODIOLOG_cam05" active="0">
		<event flypath="UFODIOLOG_cam05" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			RuleConsole("g_postEffect cinematic01")
			AddCinematicMessage( 103, 0.5 )
			AddCinematicMessage( 104, 0.5 )
			AddCinematicMessage( 105, 0.5 )

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trUFODIOLOG_cam06" active="0">
		<event flypath="UFODIOLOG_cam06" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			RuleConsole("g_postEffect cinematicEnd")
			AddCinematicMessage( 106, 0.5 )

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trUFODIOLOG_cam07" active="0">
		<event flypath="UFODIOLOG_cam07" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			AddCinematicMessage( 107, 0.5 )
			AddCinematicMessage( 108, 0.5 )
			AddCinematicMessage( 109, 0.5 )

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trUFODIOLOG_cam08" active="0">
		<event flypath="UFODIOLOG_cam08" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			AddCinematicMessage( 110, 0.5 )

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trUFODIOLOG_cam09" active="0">
		<event flypath="UFODIOLOG_cam09" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			RuleConsole("g_postEffect cinematic01")
			AddCinematicMessage( 111, 0.5 )

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trUFODIOLOG_cam10" active="0">
		<event flypath="UFODIOLOG_cam10" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			RuleConsole("g_postEffect cinematicEnd")
			AddCinematicMessage( 112, 0.5 )
			AddCinematicMessage( 113, 0.5 )

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="RolikEnd_UFODIOLOG" active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
			local humPlayer = GetEntityByName("humPlayer")
			if humPlayer then
				humPlayer:Remove()
			end

			local Droid = GetEntityByName("Droid")
			if Droid then
				Droid:Remove()
			end
			local Droid0 = GetEntityByName("Droid0")
			if Droid0 then
				Droid0:Remove()
			end

			TDeactivate("trUFODIOLOG_cam01")
			TDeactivate("trUFODIOLOG_cam02")
			TDeactivate("trUFODIOLOG_cam03")
			TDeactivate("trUFODIOLOG_cam04")
			TDeactivate("trUFODIOLOG_cam05")
			TDeactivate("trUFODIOLOG_cam06")
			TDeactivate("trUFODIOLOG_cam07")
			TDeactivate("trUFODIOLOG_cam08")
			TDeactivate("trUFODIOLOG_cam09")
			TDeactivate("trUFODIOLOG_cam10")

			RuleConsole("cinematic_spring_coeff 0.7")
			RuleConsole("g_postEffect cinematicEnd")

			CompleteQuest( "r2m1_TW_AlienInShip" )

			AddHistory( "r2_Before_Fight_Oracle" )
			AddFadingMsgId( "fm_history_got" )

			local vehPlayer = GetPlayerVehicle()
			if vehPlayer then
				vehPlayer:SetGamePositionOnGround( CVector(6070.286, 278.812, 4338.888))
				vehPlayer:SetRotation(Quaternion(-0.000, 0.945, 0.001, 0.328))
			end

			StopPlayingCustomMusic()

			SetCameraBehindPlayerVehicle()

			trigger:Deactivate()
		</script>
	</trigger>





<!-- диолог перед боем с нло -->
	<trigger Name="trBattleUFO_cam01" active="0">
		<event eventid="GE_CINEMATIC_ENTER_FADE_IN" ObjName="Player1" />
		<script>
			local vehPlayer = GetPlayerVehicle()
			if vehPlayer then
				vehPlayer:SetGamePositionOnGround( CVector(1216.832, 437.108, 1496.975))
				vehPlayer:SetRotation(Quaternion(-0.082, 0.307, -0.035, 0.948))
			end

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trBattleUFO_cam02" active="0">
		<event flypath="BattleUFO_cam02" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			AddCinematicMessage( 121, 1 )

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trBattleUFO_cam03" active="0">
		<event flypath="BattleUFO_cam03" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			AddCinematicMessage( 122, 0.25 )

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trBattleUFO_cam04" active="0">
		<event flypath="BattleUFO_cam04" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			local vehPlayer = GetPlayerVehicle()
			if vehPlayer then
				vehPlayer:SetCustomLinearVelocity( 10 )
				vehPlayer:SetThrottle( 1 )
				vehPlayer:SetExternalPathByName("player_path04")
			end

			AddCinematicMessage( 123, 0.25 )

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="RolikEnd_BattleUFO" active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
			local vehPlayer = GetPlayerVehicle()
			if vehPlayer then
				vehPlayer:SetExternalPathByName("player_path04")
				vehPlayer:PlaceToEndOfPath("player_path04")
			end

			local Droid = GetEntityByName("Droid")
			local Droid0 = GetEntityByName("Droid0")
			if Droid then
				Droid:Remove()
			end
			if Droid0 then
				Droid0:Remove()
			end
			TDeactivate("trBattleUFO_cam01")
			TDeactivate("trBattleUFO_cam02")
			TDeactivate("trBattleUFO_cam03")
			TDeactivate("trBattleUFO_cam04")

			CreateNewDummyObject( "r2_crag_copped_3", "cragTR", -1, -1, CVector(1255, 420, 1591), Quaternion(0.0000, 0.1951, 0.0000, 0.9808), 0)

			TActivate("TRIGGER_ALIENSDIE")

			getObj("AliensShip"):NextState()

			SetCameraBehindPlayerVehicle()

			PlayCustomMusic("Battle01")

			local bossp = GetEntityByName("AliensShip")
			if bossp then
				ShowBossIndicator(bossp:GetId())
			end

			trigger:Deactivate()
		</script>
	</trigger>





<!-- смерть НЛО -->
	<trigger Name="RolikBegin_UFODIE" active="0">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			PlayCustomMusic("Passage04")

			local Plf = GetPlayerVehicle()
			local PlfID = GetPlayerVehicleId()
			local PlfCoor = Plf:GetPosition()
			local PlfCoor2 = PlfCoor
			local ufopos = GetEntityByName("AliensShip"):GetPosition()
			local camPos = GetCameraPos()
			PlfCoor.y = PlfCoor.y + 5
			PlfCoor.z = PlfCoor.z + 60

			PlfCoor2.y = PlfCoor2.y + 10
			PlfCoor2.z = PlfCoor2.z + 7

			FlyAround( 1, 0, 15, 2, PlfCoor2, PlfID, 1, 0 )
			Fly("UFODIE_cam01", CINEMATIC_NO_AIM, 0, 6, 0, 0, nil, nil, nil)
			Fly("UFODIE_cam02", CINEMATIC_NO_AIM, 0, 5, 0, 0 )
			Fly("UFODIE_cam032", CINEMATIC_NO_AIM, 0, 6, 0, 0 )
			Fly("UFODIE_cam031", CINEMATIC_NO_AIM, 0, 6, 0, 0 )
			Fly("UFODIE_cam04", CINEMATIC_NO_AIM, 0, 15, 0, 0 )
			FlyAround( 1, 0, 70, 3, PlfCoor, PlfID, 0, 0 )
			Fly("start_game", CINEMATIC_NO_AIM, 0, 67, 0, 0 )
			Fly("BattleUFO_cam05", CINEMATIC_NO_AIM, 0, 380, 0, 1 )
			StartCinematic()

			CreateEffectTTLed("ET_S_UFODEATH", CVector(ufopos), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 30000)

			GetEntityByName("AliensShip"):NextState()
			local moverId = CreateNewObject { prototypeName	= "cinematicMover", objName  = "" }
			local mover = GetEntityByID( moverId ) 
			local controlledObj = GetEntityByName("AliensShip")
			if controlledObj then
				mover:SetObjAndPath( controlledObj:GetId(), "bossMove1", 30 )
			end

			TActivate("RolikEnd_UFODIE")
			TActivate("trUFODIE_EF")
			TActivate("trUFODIE_cam04")
			TActivate("trUFODIE_cam05")
			TActivate("trUFODIE_cam06")

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trUFODIE_EF" active="0">
		<event timeout="0.1" eventid="GE_TIME_PERIOD" />
		<script>
			local ufo = GetEntityByName("AliensShip")
			local ufoPos = ufo:GetPosition()

			if (ufoPos.x > 1721) and (1729 > ufoPos.x) and (ufoPos.z > 1726 ) and (1734 > ufoPos.z ) then
				CreateNewSgNodeObject("ET_PS_ROCKS1", "boom01", -1, -1, CVector(1697.341, 463.358, 1706.809), Quaternion(0.078, 0.855, 0.496, 0.134))
				CreateNewSgNodeObject("ET_PS_DRONE_EX", "boom011", -1, -1, CVector(1697.341, 463.358, 1706.809), Quaternion(0.078, 0.855, 0.496, 0.134))
			end

			if (ufoPos.x > 1810) and (1818 > ufoPos.x) and (ufoPos.z > 1654 ) and ( 1662 > ufoPos.z ) then
				CreateNewSgNodeObject("ET_PS_ROCKS1", "boom02", -1, -1, CVector(1808.321, 412.275, 1578.256), Quaternion(0.078, 0.855, 0.496, 0.134))
				CreateNewSgNodeObject("ET_PS_DRONE_EX", "boom022", -1, -1, CVector(1808.321, 412.275, 1578.256), Quaternion(0.078, 0.855, 0.496, 0.134))
			end

			if (ufoPos.x > 1903) and (1911 > ufoPos.x) and (ufoPos.z > 1594 ) and (1602 > ufoPos.z ) then
				CreateNewSgNodeObject("ET_PS_AIRWAVE", "boom03", -1, -1, CVector(1943.270, 295.807, 1407.104), Quaternion(0.078, 0.855, 0.496, 0.134))
				CreateNewSgNodeObject("ET_PS_BIG_SMOKE12", "boom031", -1, -1, CVector(1943.270, 295.807, 1407.104), Quaternion(0.078, 0.855, 0.496, 0.134))
				CreateNewSgNodeObject("ET_PS_BIG_SMOKE12", "boom032", -1, -1, CVector(1943.270, 295.807, 1407.104), Quaternion(0.078, 0.855, 0.496, 0.134))
				trigger:Deactivate()
			end
		</script>
	</trigger>

	<trigger Name="trUFODIE_cam04" active="0">
		<event flypath="UFODIE_cam04" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			AddCinematicMessage( 131, 9 )

			local vehPlayer = GetPlayerVehicle()
			local camPos = GetCameraPos()
			if vehPlayer then
				vehPlayer:SetGamePositionOnGround( CVector(1362.469, 417.135, 1801.740))
				vehPlayer:SetRotation(Quaternion(-0.005, -0.793, -0.012, 0.610))
			end

			CreateEffectTTLed("ET_S_UFODEATH", CVector(camPos), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 30000)

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trUFODIE_cam05" active="0">
		<event flypath="start_game" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			SetWeather(0)

			SetGameTime(0, 0)

			PlayCustomMusic("Bio07unloop")

			AddCinematicMessage( 77771, 0.1)

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trUFODIE_cam06" active="0">
		<event flypath="BattleUFO_cam05" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			PlayCustomMusic("UFOEndMusic")
			
			AddCinematicMessage( 77774, 0.1)
			AddCinematicMessage( 77772, 0.1)
			AddCinematicMessage( 77773, 0.1)
			AddCinematicMessage( 77775, 0.1)
			
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="RolikEnd_UFODIE" active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
			TDeactivate("trUFODIE_EF")
			TDeactivate("trUFODIE_cam04")
			TDeactivate("trUFODIE_cam05")
			TDeactivate("trUFODIE_cam06")

			StopPlayingCustomMusic()
			TActivate("trTotalGameCount")

			trigger:Deactivate()
		</script>
	</trigger>
</triggers>